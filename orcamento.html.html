<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turma da Fralda - Orçamentos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .form-section {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            margin-bottom: 1.5rem;
        }
        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            transition: border-color 0.2s;
        }
        .form-input:focus {
            outline: none;
            border-color: #fb7185;
            box-shadow: 0 0 0 2px #fecdd3;
        }
        .btn-primary {
            background-color: #f43f5e;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: #e11d48;
        }
        .btn-secondary {
            background-color: #e2e8f0;
            color: #1e293b;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        .btn-secondary:hover {
            background-color: #cbd5e1;
        }
        /* Estilos para o Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 800px;
            border-radius: 0.75rem;
            position: relative;
        }
        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 25px;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- Cabeçalho -->
        <header class="text-center mb-8">
            <div class="inline-flex items-center gap-4">
                 <div class="flex">
                    <div class="w-10 h-10 bg-blue-300 flex items-center justify-center rounded-lg text-white font-bold text-2xl transform -rotate-6">T</div>
                    <div class="w-10 h-10 bg-pink-400 flex items-center justify-center rounded-lg text-white font-bold text-2xl transform rotate-6 -ml-2">F</div>
                </div>
                <h1 class="text-3xl font-bold text-slate-800">Turma da Fralda - Orçamentos</h1>
            </div>
        </header>

        <main id="mainForm">
            <!-- Seção de Dados do Cliente -->
            <section class="form-section">
                <h2 class="text-xl font-bold mb-4 text-slate-700">1. Dados do Cliente</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="clientName" class="block mb-1 font-medium text-slate-600">Nome Completo</label>
                        <input type="text" id="clientName" class="form-input" placeholder="Ex: Thaísa Cristina Maranhão Martins">
                    </div>
                    <div>
                        <label for="region" class="block mb-1 font-medium text-slate-600">Região de Atendimento</label>
                        <select id="region" class="form-input">
                            <option value="Baixada Santista">Baixada Santista</option>
                            <option value="São Paulo">São Paulo</option>
                        </select>
                    </div>
                    <div>
                        <label for="city" class="block mb-1 font-medium text-slate-600">Cidade do Atendimento</label>
                        <input type="text" id="city" class="form-input" placeholder="Ex: Santos">
                    </div>
                    <div>
                        <label for="neighborhood" class="block mb-1 font-medium text-slate-600">Bairro</label>
                        <input type="text" id="neighborhood" class="form-input" placeholder="Ex: Marapé">
                    </div>
                </div>
            </section>

            <!-- Seção de Serviço e Plano -->
            <section class="form-section">
                <h2 class="text-xl font-bold mb-4 text-slate-700">2. Serviço e Plano</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="serviceType" class="block mb-1 font-medium text-slate-600">Tipo de Serviço</label>
                        <select id="serviceType" class="form-input">
                            <option value="Cuidar e Brincar">Cuidar e Brincar</option>
                            <option value="Cuidar e Educar">Cuidar e Educar</option>
                            <option value="Cuidar e Acolher">Cuidar e Acolher</option>
                        </select>
                    </div>
                    <div>
                        <label for="plan" class="block mb-1 font-medium text-slate-600">Plano</label>
                        <select id="plan" class="form-input">
                            <option value="Esporádico">Esporádico</option>
                            <option value="Mensal fixo">Mensal fixo</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- Seção de Configuração de Dias e Horários -->
            <section class="form-section">
                <h2 class="text-xl font-bold mb-4 text-slate-700">3. Dias e Horários</h2>

                <!-- Campos para Plano Mensal -->
                <div id="monthly-fields" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                         <div>
                            <label for="monthly-days" class="block mb-1 font-medium text-slate-600">Dias da Semana</label>
                            <div id="monthly-days-checkboxes" class="flex flex-wrap gap-x-4 gap-y-2">
                                <label class="flex items-center"><input type="checkbox" value="1" class="mr-2">Seg</label>
                                <label class="flex items-center"><input type="checkbox" value="2" class="mr-2">Ter</label>
                                <label class="flex items-center"><input type="checkbox" value="3" class="mr-2">Qua</label>
                                <label class="flex items-center"><input type="checkbox" value="4" class="mr-2">Qui</label>
                                <label class="flex items-center"><input type="checkbox" value="5" class="mr-2">Sex</label>
                                <label class="flex items-center"><input type="checkbox" value="6" class="mr-2">Sáb</label>
                                <label class="flex items-center"><input type="checkbox" value="0" class="mr-2">Dom</label>
                            </div>
                        </div>
                        <div>
                            <label for="monthly-start-time" class="block mb-1 font-medium text-slate-600">Horário de Entrada</label>
                            <input type="time" id="monthly-start-time" class="form-input">
                        </div>
                        <div>
                            <label for="monthly-end-time" class="block mb-1 font-medium text-slate-600">Horário de Saída</label>
                            <input type="time" id="monthly-end-time" class="form-input">
                        </div>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="break" class="mr-2">
                        <label for="break">Pausa de 1 hora para intervalo</label>
                    </div>
                </div>

                <!-- Campos para Plano Esporádico -->
                <div id="sporadic-fields">
                    <div id="sporadic-dates-container">
                        <!-- Entradas de data serão adicionadas aqui -->
                    </div>
                    <button type="button" id="add-sporadic-date" class="btn-secondary mt-2">Adicionar Data</button>
                </div>
            </section>
            
            <!-- Seção de Detalhes Adicionais -->
            <section class="form-section">
                <h2 class="text-xl font-bold mb-4 text-slate-700">4. Detalhes Adicionais</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div>
                        <label for="professionals" class="block mb-1 font-medium text-slate-600">Nº de Profissionais</label>
                        <input type="number" id="professionals" class="form-input" value="1" min="1">
                    </div>
                     <div>
                        <label for="children" class="block mb-1 font-medium text-slate-600">Nº de Crianças</label>
                        <input type="number" id="children" class="form-input" value="1" min="1">
                    </div>
                    <div>
                        <label for="childrenAge" class="block mb-1 font-medium text-slate-600">Idade das Crianças</label>
                        <input type="text" id="childrenAge" class="form-input" placeholder="Ex: 10 meses">
                    </div>
                    <div>
                        <label for="validity" class="block mb-1 font-medium text-slate-600">Validade (dias)</label>
                        <input type="number" id="validity" class="form-input" value="10" min="1">
                    </div>
                </div>
            </section>

            <!-- Seção de Descontos e Observações -->
             <section class="form-section">
                <h2 class="text-xl font-bold mb-4 text-slate-700">5. Descontos, Adicionais e Observações</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="discount-percent" class="block mb-1 font-medium text-slate-600">Desconto (%)</label>
                        <input type="number" id="discount-percent" class="form-input" value="0" min="0">
                    </div>
                    <div>
                        <label for="discount-value" class="block mb-1 font-medium text-slate-600">Desconto (R$)</label>
                        <input type="number" id="discount-value" class="form-input" value="0" min="0">
                    </div>
                </div>
                <div class="mt-4 border-t pt-4">
                    <div class="flex items-center">
                        <input type="checkbox" id="emergency-addon-checkbox" class="h-4 w-4 rounded border-gray-300 text-pink-600 focus:ring-pink-500">
                        <label for="emergency-addon-checkbox" class="ml-3 block font-medium text-slate-600">Adicional Emergencial (20% sobre o subtotal)</label>
                    </div>
                </div>
                 <div class="mt-4">
                    <label for="observations" class="block mb-1 font-medium text-slate-600">Observações</label>
                    <textarea id="observations" class="form-input" rows="3" placeholder="Ex: Transporte da babá gratuito..."></textarea>
                </div>
            </section>


            <!-- Botão de Calcular -->
            <div class="text-center mt-8">
                <button type="button" id="calculate-btn" class="btn-primary text-lg">Calcular Orçamento</button>
            </div>
        </main>

        <!-- Seção de Resultados -->
        <section id="results-section" class="form-section mt-8 hidden">
            <h2 class="text-2xl font-bold mb-6 text-center text-slate-800">Resultado do Orçamento</h2>
            <div class="space-y-4 text-lg">
                <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
                    <span class="font-medium text-slate-600">Valor Base:</span>
                    <span id="result-base" class="font-bold text-slate-800"></span>
                </div>
                 <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
                    <span class="font-medium text-slate-600">Adicional Noturno:</span>
                    <span id="result-night" class="font-bold text-slate-800"></span>
                </div>
                <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
                    <span class="font-medium text-slate-600">Adicional Dom/Feriado:</span>
                    <span id="result-sunday" class="font-bold text-slate-800"></span>
                </div>
                <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
                    <span class="font-medium text-slate-600">Adicional Criança Extra:</span>
                    <span id="result-child" class="font-bold text-slate-800"></span>
                </div>
                 <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
                    <span class="font-medium text-slate-600">Adicional Emergencial:</span>
                    <span id="result-emergency" class="font-bold text-slate-800"></span>
                </div>
                <div class="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                    <span class="font-medium text-red-600">Descontos:</span>
                    <span id="result-discount" class="font-bold text-red-700"></span>
                </div>
                <hr class="my-4">
                <div class="flex justify-between items-center p-4 bg-pink-100 rounded-lg">
                    <span class="text-xl font-bold text-pink-800">Valor Total:</span>
                    <span id="result-total" class="text-2xl font-bold text-pink-800"></span>
                </div>
            </div>
             <div class="text-center mt-8">
                <button type="button" id="preview-btn" class="btn-primary">Gerar Prévia do PDF</button>
            </div>
        </section>
    </div>

    <!-- Modal para Prévia do PDF -->
    <div id="previewModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <div id="pdf-preview-content" class="p-8">
                <!-- Conteúdo será injetado aqui -->
            </div>
        </div>
    </div>


    <script>
        // --- BANCO DE DADOS DE PREÇOS (Simulando Airtable) ---
        const priceTable = {
            "Baixada Santista": {
                "Cuidar e Brincar": {
                    "Mensal fixo": { base: 30.50, night: 10.50, sunday: 30.50, child: 10.50 },
                    "Esporádico": { base: 37.50, night: 9.37, sunday: 37.50, child: 10.50 }
                },
                "Cuidar e Educar": {
                    "Mensal fixo": { base: 40.00, night: 10.00, sunday: 40.00, child: 10.50 },
                    "Esporádico": { base: 52.50, night: 13.13, sunday: 52.50, child: 10.50 }
                },
                "Cuidar e Acolher": {
                    "Mensal fixo": { base: 40.00, night: 10.00, sunday: 40.00, child: 10.50 },
                    "Esporádico": { base: 52.50, night: 13.13, sunday: 52.50, child: 10.50 }
                }
            },
            "São Paulo": {
                "Cuidar e Brincar": {
                    "Mensal fixo": { base: 40.00, night: 10.50, sunday: 40.00, child: 10.50 },
                    "Esporádico": { base: 50.00, night: 10.50, sunday: 50.00, child: 10.50 }
                },
                "Cuidar e Educar": {
                    "Mensal fixo": { base: 42.00, night: 10.50, sunday: 42.00, child: 10.50 },
                    "Esporádico": { base: 60.00, night: 10.50, sunday: 60.00, child: 10.50 }
                },
                "Cuidar e Acolher": {
                    "Mensal fixo": { base: 42.00, night: 10.50, sunday: 42.00, child: 10.50 },
                    "Esporádico": { base: 60.00, night: 10.50, sunday: 60.00, child: 10.50 }
                }
            }
        };
        
        let sporadicDateCount = 0;
        let lastCalculation = {};

        // --- LÓGICA DO FORMULÁRIO ---
        document.addEventListener('DOMContentLoaded', () => {
            const planSelect = document.getElementById('plan');
            const monthlyFields = document.getElementById('monthly-fields');
            const sporadicFields = document.getElementById('sporadic-fields');
            const addSporadicDateBtn = document.getElementById('add-sporadic-date');
            const calculateBtn = document.getElementById('calculate-btn');
            const previewBtn = document.getElementById('preview-btn');
            const modal = document.getElementById('previewModal');
            const closeBtn = document.querySelector('.close-button');


            // Adiciona a primeira data esporádica por padrão
            addSporadicDate();

            planSelect.addEventListener('change', () => {
                if (planSelect.value === 'Mensal fixo') {
                    monthlyFields.classList.remove('hidden');
                    sporadicFields.classList.add('hidden');
                } else {
                    monthlyFields.classList.add('hidden');
                    sporadicFields.classList.remove('hidden');
                }
            });

            addSporadicDateBtn.addEventListener('click', addSporadicDate);
            calculateBtn.addEventListener('click', calculateQuote);
            
            // Lógica do Modal
            previewBtn.addEventListener('click', generatePreview);
            closeBtn.addEventListener('click', () => modal.style.display = "none");
            window.addEventListener('click', (event) => {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            });

        });

        function addSporadicDate() {
            sporadicDateCount++;
            const container = document.getElementById('sporadic-dates-container');
            const newDateEntry = document.createElement('div');
            newDateEntry.classList.add('grid', 'grid-cols-1', 'md:grid-cols-3', 'gap-4', 'mb-2');
            newDateEntry.innerHTML = `
                <div>
                    <label class="block mb-1 text-sm font-medium text-slate-500">Data ${sporadicDateCount}</label>
                    <input type="date" class="form-input sporadic-date">
                </div>
                <div>
                    <label class="block mb-1 text-sm font-medium text-slate-500">Entrada</label>
                    <input type="time" class="form-input sporadic-start-time">
                </div>
                <div>
                    <label class="block mb-1 text-sm font-medium text-slate-500">Saída</label>
                    <input type="time" class="form-input sporadic-end-time">
                </div>
            `;
            container.appendChild(newDateEntry);
        }

        function formatCurrency(value) {
            return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        // --- LÓGICA DE CÁLCULO ---
        function calculateQuote() {
            const region = document.getElementById('region').value;
            const serviceType = document.getElementById('serviceType').value;
            const plan = document.getElementById('plan').value;
            const numChildren = parseInt(document.getElementById('children').value) || 1;
            const numProfessionals = parseInt(document.getElementById('professionals').value) || 1;

            const prices = priceTable[region][serviceType][plan];
            let totalHours = 0;
            let baseCost = 0;
            let nightCost = 0;
            let sundayCost = 0;
            let childCost = 0;
            
            let conditionsText = "";
            let serviceDatesText = "";
            let servicePeriodText = "";

            if (plan === 'Mensal fixo') {
                const startTime = document.getElementById('monthly-start-time').value;
                const endTime = document.getElementById('monthly-end-time').value;
                const hasBreak = document.getElementById('break').checked;
                
                const selectedDays = Array.from(document.querySelectorAll('#monthly-days-checkboxes input:checked'));
                const numDaysPerWeek = selectedDays.length;

                if (startTime && endTime && numDaysPerWeek > 0) {
                    const start = new Date(`1970-01-01T${startTime}`);
                    const end = new Date(`1970-01-01T${endTime}`);
                    let dailyHours = (end - start) / (1000 * 60 * 60);
                    if (dailyHours < 0) dailyHours += 24; // Para turnos que cruzam a meia-noite
                    if (hasBreak) dailyHours = Math.max(0, dailyHours - 1);

                    const weeklyFactor = numDaysPerWeek <= 5 ? 4.4 : 4.2;
                    totalHours = dailyHours * numDaysPerWeek * weeklyFactor;
                    baseCost = totalHours * prices.base;

                    // Simplificação para adicionais mensais
                    selectedDays.forEach(day => {
                        if (day.value === '0') { // Se for domingo
                           sundayCost += (dailyHours * 4.2) * prices.sunday; // 4.2 semanas em um mês para domingos
                        }
                    });
                    
                    // Adicional noturno (simplificado)
                    const nightStart = 22;
                    const nightEnd = 5;
                    const startHour = start.getHours();
                    const endHour = end.getHours();
                    let nightHoursDaily = 0;
                    if (startHour >= nightStart || startHour < nightEnd || endHour > nightStart || (endHour < nightEnd && endHour > startHour) ) {
                         // Lógica complexa de cálculo noturno omitida para simplificação do app.
                         // Em um cenário real, seria necessário iterar hora a hora.
                    }
                    nightCost = (nightHoursDaily * numDaysPerWeek * weeklyFactor) * prices.night;
                }

            } else { // Esporádico
                const dateEntries = document.querySelectorAll('#sporadic-dates-container > div');
                let totalMinutes = 0;
                let serviceDays = 0;
                const datesArray = [];

                dateEntries.forEach(entry => {
                    const dateVal = entry.querySelector('.sporadic-date').value;
                    const startVal = entry.querySelector('.sporadic-start-time').value;
                    const endVal = entry.querySelector('.sporadic-end-time').value;

                    if (dateVal && startVal && endVal) {
                        serviceDays++;
                        const date = new Date(`${dateVal}T00:00:00`);
                        const start = new Date(`${dateVal}T${startVal}`);
                        const end = new Date(`${dateVal}T${endVal}`);
                        
                        let durationHours = (end - start) / (1000 * 60 * 60);
                        if (durationHours < 0) durationHours += 24;
                        
                        totalMinutes += durationHours * 60;
                        totalHours += durationHours;
                        
                        baseCost += durationHours * prices.base;

                        // Adicional de Domingo/Feriado
                        if (date.getDay() === 0) { // 0 é Domingo
                            sundayCost += durationHours * prices.sunday;
                        }

                        // Adicional Noturno
                        let currentHour = new Date(start);
                        while(currentHour < end) {
                            const h = currentHour.getHours();
                            if (h >= 22 || h < 5) {
                                nightCost += prices.night;
                            }
                            currentHour.setHours(currentHour.getHours() + 1);
                        }
                        datesArray.push({date: dateVal, start: startVal, end: endVal});
                    }
                });
                
                const totalCalcHours = Math.floor(totalMinutes / 60);
                const totalCalcMins = totalMinutes % 60;
                conditionsText = `${totalCalcHours} hora(s) ${totalCalcMins} minuto(s) (contados para ${serviceDays} dia(s) de atendimento).`;
                serviceDatesText = `sendo dias ${datesArray.map(d => new Date(d.date+'T00:00:00').toLocaleDateString('pt-BR', {day: '2-digit', month: 'long', year: 'numeric'})).join(', ')}. Dias úteis.`;
                servicePeriodText = `das ${datesArray[0]?.start || ''} às ${datesArray[0]?.end || ''} (${Math.round((new Date(`${datesArray[0]?.date}T${datesArray[0]?.end}`) - new Date(`${datesArray[0]?.date}T${datesArray[0]?.start}`))/(1000*60*60))} horas por dia)`;
            }

            if (numChildren > 1) {
                childCost = totalHours * prices.child * (numChildren - 1);
            }
            
            baseCost *= numProfessionals;
            nightCost *= numProfessionals;
            sundayCost *= numProfessionals;
            childCost *= numProfessionals;

            const subtotal = baseCost + nightCost + sundayCost + childCost;
            
            const hasEmergencyAddon = document.getElementById('emergency-addon-checkbox').checked;
            let emergencyAddonValue = 0;
            if (hasEmergencyAddon) {
                emergencyAddonValue = subtotal * 0.20;
            }

            const discountPercent = parseFloat(document.getElementById('discount-percent').value) || 0;
            const discountValue = parseFloat(document.getElementById('discount-value').value) || 0;

            let totalDiscount = 0;
            const valueBeforeDiscount = subtotal + emergencyAddonValue;
            if (discountPercent > 0) {
                totalDiscount += valueBeforeDiscount * (discountPercent / 100);
            }
            totalDiscount += discountValue;

            const totalCost = valueBeforeDiscount - totalDiscount;

            // Exibir resultados
            document.getElementById('results-section').classList.remove('hidden');
            document.getElementById('result-base').textContent = formatCurrency(baseCost);
            document.getElementById('result-night').textContent = formatCurrency(nightCost);
            document.getElementById('result-sunday').textContent = formatCurrency(sundayCost);
            document.getElementById('result-child').textContent = formatCurrency(childCost);
            document.getElementById('result-emergency').textContent = formatCurrency(emergencyAddonValue);
            document.getElementById('result-discount').textContent = `- ${formatCurrency(totalDiscount)}`;
            document.getElementById('result-total').textContent = formatCurrency(totalCost);
            
            // Salvar para o preview
            lastCalculation = {
                baseCost, nightCost, sundayCost, childCost, emergencyAddon: emergencyAddonValue, totalDiscount, totalCost,
                conditionsText, serviceDatesText, servicePeriodText
            };
            
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
        
        function generatePreview() {
            const clientName = document.getElementById('clientName').value;
            const city = document.getElementById('city').value;
            const neighborhood = document.getElementById('neighborhood').value;
            const quoteDate = new Date().toLocaleDateString('pt-BR');
            const serviceType = document.getElementById('serviceType').value;
            const plan = document.getElementById('plan').value;
            const numChildren = document.getElementById('children').value;
            const childrenAge = document.getElementById('childrenAge').value;
            const numProfessionals = document.getElementById('professionals').value;
            const observations = document.getElementById('observations').value;
            const validity = document.getElementById('validity').value;
            
            const quoteId = 'C' + Math.floor(1000 + Math.random() * 9000);

            const previewContent = `
                <div class="font-sans p-4 border-2 border-gray-200 rounded-lg">
                    <h3 class="text-lg font-bold text-pink-600 mb-4">Proposta – ${plan} ${serviceType}</h3>
                    <p class="mb-4 text-sm">Esta proposta será destinada para atender: ${clientName} – ${city}(${neighborhood})/SP - ${quoteDate}</p>
                    
                    <div class="text-right mb-4">
                        <p class="text-sm">Valor tabela por tempo limitado:</p>
                        <p class="text-2xl font-bold text-slate-800">${formatCurrency(lastCalculation.totalCost)}</p>
                    </div>

                    <div class="bg-slate-50 p-3 rounded-lg text-sm space-y-2">
                        <p><strong>ID da Proposta:</strong> ${quoteId}</p>
                        <p><strong>Validade da proposta:</strong> ${validity} dias</p>
                        <p><strong>Condições da proposta:</strong> ${lastCalculation.conditionsText}</p>
                        <p><strong>Data do serviço:</strong> ${lastCalculation.serviceDatesText}</p>
                        <p><strong>Período do serviço:</strong> ${lastCalculation.servicePeriodText}</p>
                        <p><strong>Número de Crianças:</strong> ${numChildren}</p>
                        <p><strong>Idade das Crianças:</strong> ${childrenAge}</p>
                        <p><strong>Número de babás:</strong> ${numProfessionals} ${serviceType === 'Cuidar e Brincar' ? 'Baby-sitter' : 'Pedagoga'}</p>
                        <p><strong>Adicional Noturno:</strong> ${formatCurrency(lastCalculation.nightCost)}</p>
                        <p><strong>Adicional Domingo e Feriado:</strong> ${formatCurrency(lastCalculation.sundayCost)}</p>
                        <p><strong>Adicional Emergencial:</strong> ${formatCurrency(lastCalculation.emergencyAddon)}</p>
                        <p><strong>Observações:</strong> ${observations}</p>
                    </div>
                </div>
            `;
            
            document.getElementById('pdf-preview-content').innerHTML = previewContent;
            document.getElementById('previewModal').style.display = 'block';
        }

    </script>

</body>
</html>
